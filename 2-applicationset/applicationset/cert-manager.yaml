apiVersion: argoproj.io/v1alpha1
kind: ApplicationSet
metadata:
  name: cert-manager
  namespace: argocd
spec:
  generators:
    - clusters: {}
  template:
    metadata:
      name: "cert-manager-{{name}}"
    spec:
      project: default
      sources:
        - repoURL: 'https://charts.jetstack.io'
          chart: cert-manager
          targetRevision: 1.19.2
          helm:
            releaseName: cert-manager
            valueFiles:
              - $values/2-applicationset/apps/cert-manager/rancher.yaml
        - repoURL: 'https://github.com/aleiner/PM2026Demo.git'
          targetRevision: main
          ref: values
      destination:
        server: '{{server}}' # BUILT-IT VARIABLE
        namespace: cert-manager